agent {
  data_dir = "/opt/spire/data"
  log_level = "INFO"

  server_address = "spire-server"
  server_port = "8081"

  trust_domain = "atb.example.org"

  # Workload API socket - workloads connect here
  socket_path = "/tmp/spire-agent/public/api.sock"

  # For demo/dev: Bootstrap without pre-configured trust bundle
  # In production, use trust_bundle_path with pre-distributed CA cert
  insecure_bootstrap = true
}

plugins {
  # Join token attestation for Docker demo
  NodeAttestor "join_token" {
    plugin_data {}
  }

  # Docker workload attestation
  WorkloadAttestor "docker" {
    plugin_data {
      docker_socket_path = "unix:///var/run/docker.sock"
    }
  }

  # Unix workload attestation (fallback)
  WorkloadAttestor "unix" {
    plugin_data {}
  }

  KeyManager "disk" {
    plugin_data {
      directory = "/opt/spire/data"
    }
  }
}
