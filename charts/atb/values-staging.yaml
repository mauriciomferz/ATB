namespace: atb-staging

broker:
  replicas: 1
  image:
    tag: "0.1.0-staging"
  tls:
    mode: spiffe
  env:
    UPSTREAM_URL: "http://upstream.atb-staging.svc.cluster.local:9000"

agentauth:
  enabled: true
  secrets:
    signingKey:
      name: "atb-agentauth-signing-key"  # Must be created before helm install
      key: "ed25519_privkey_pem"

opa:
  replicas: 1

observability:
  prometheus:
    enabled: true
    serviceMonitor:
      enabled: true
      interval: 30s
      scrapeTimeout: 10s
  otel:
    enabled: true
    endpoint: "http://otel-collector.monitoring.svc.cluster.local:4318"
    sampler: "always_on"
    samplerArg: "1.0"

csi:
  enabled: true
  mountPath: "/spire-agent-socket"
  socketFile: "workload-api.sock"
